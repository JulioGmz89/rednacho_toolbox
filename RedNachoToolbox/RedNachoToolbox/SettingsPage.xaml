<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:RedNachoToolbox"
             x:Class="RedNachoToolbox.SettingsPage"
             x:DataType="local:SettingsPage"
             BackgroundColor="{DynamicResource PageBackgroundColor}" Padding="300,0">

    <ScrollView>
        <VerticalStackLayout Padding="0,24,0,24" Spacing="24">
            <!-- Page Header with Close Button -->
            <Grid ColumnDefinitions="*, Auto" Padding="0,0,0,0">
                <VerticalStackLayout Grid.Column="0" Spacing="8">
                    <Label Text="Settings"
                           FontSize="28"
                           Style="{StaticResource HeaderStyle}"
                           FontAttributes="Bold"
                           HorizontalOptions="Start" />
                    
                    <Label Text="Customize your Red Nacho ToolBox experience"
                           FontSize="14"
                           Style="{StaticResource SecondaryTextStyle}"
                           HorizontalOptions="Start" />
                </VerticalStackLayout>

                <!-- Close (X) button - uses themed PNG states in Resources/Images -->
                <Image x:Name="CloseButtonImage"
                       Grid.Column="1"
                       Source="close_settings_idle_light.png"
                       WidthRequest="40"
                       HeightRequest="40"
                       HorizontalOptions="End"
                       VerticalOptions="Start"
                       Margin="12,0,0,0">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnCloseTapped" />
                        <PointerGestureRecognizer PointerEntered="OnClosePointerEntered"
                                                  PointerExited="OnClosePointerExited" />
                    </Image.GestureRecognizers>
                </Image>
            </Grid>

            <!-- Theme Section -->
            <Border BackgroundColor="{DynamicResource CardBackgroundColor}"
                    Stroke="{DynamicResource BorderColorLight}"
                    StrokeThickness="1"
                    Padding="20">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12"/>
                </Border.StrokeShape>
                <Border.Shadow>
                    <Shadow Brush="{DynamicResource CardShadowColor}"
                            Offset="0,2"
                            Radius="4"
                            Opacity="0.3"/>
                </Border.Shadow>

                <VerticalStackLayout Spacing="16">
                    
                    <!-- Theme Section Header -->
                    <VerticalStackLayout Spacing="4">
                        <Label Text="Appearance"
                               FontSize="20"
                               Style="{StaticResource SubHeaderStyle}" />
                        
                        <Label Text="Choose your preferred theme and sidebar layout"
                               FontSize="14"
                               Style="{StaticResource SecondaryTextStyle}" />
                    </VerticalStackLayout>

                    <!-- Theme Mode Picker (System/Light/Dark) -->
                    <Grid ColumnDefinitions="*, Auto" 
                          ColumnSpacing="12">
                        
                        <Label Grid.Column="0"
                               Text="Theme"
                               FontSize="16"
                               Style="{StaticResource BodyTextStyle}"
                               FontFamily="InterSemiBold"
                               VerticalOptions="Center" />

                        <Border Grid.Column="1"
                                Style="{StaticResource InputContainerBorderStyle}"
                                HorizontalOptions="End"
                                WidthRequest="200">
                            <Picker x:Name="ThemeModePicker"
                                    BackgroundColor="Transparent"
                                    TextColor="{DynamicResource InputTextColor}"
                                    TitleColor="{DynamicResource InputTextColor}"
                                    SelectedIndexChanged="OnThemeModePickerChanged">
                                <Picker.Items>
                                    <x:String>System</x:String>
                                    <x:String>Light</x:String>
                                    <x:String>Dark</x:String>
                                </Picker.Items>
                            </Picker>
                        </Border>
                    </Grid>

                    <!-- Sidebar Collapse Toggle Switch -->
                    <Grid ColumnDefinitions="*, Auto" 
                          ColumnSpacing="12">
                        
                        <Label Grid.Column="0"
                               Text="Collapsed Sidebar"
                               FontSize="16"
                               Style="{StaticResource BodyTextStyle}"
                               FontFamily="InterSemiBold"
                               VerticalOptions="Center" />

                        <Switch x:Name="SidebarCollapseSwitch"
                                Grid.Column="1"
                                IsToggled="{Binding IsSidebarCollapsed}"
                                Toggled="OnSidebarCollapseSwitchToggled"
                                VerticalOptions="Center"
                                HorizontalOptions="End" />
                    </Grid>

                    
                </VerticalStackLayout>
            </Border>

            <!-- Application Info Section (no card) -->
            <VerticalStackLayout Spacing="16">
                <!-- App Info Header -->
                <VerticalStackLayout Spacing="2">
                    <Label Text="Application Info"
                           FontSize="16"
                           Style="{StaticResource SecondaryTextStyle}" />
                </VerticalStackLayout>

                <!-- App Details -->
                <VerticalStackLayout Spacing="8">
                    <Grid ColumnDefinitions="120, *" ColumnSpacing="12">
                        <Label Grid.Column="0"
                               Text="Version:"
                               FontSize="13"
                               Style="{StaticResource SecondaryTextStyle}" />
                        
                        <Label Grid.Column="1"
                               Text="1.0.0"
                               FontSize="13"
                               Style="{StaticResource BodyTextStyle}" />
                    </Grid>

                    <Grid ColumnDefinitions="120, *" ColumnSpacing="12">
                        <Label Grid.Column="0"
                               Text="Framework:"
                               FontSize="13"
                               Style="{StaticResource SecondaryTextStyle}" />
                        
                        <Label Grid.Column="1"
                               Text=".NET MAUI"
                               FontSize="13"
                               Style="{StaticResource BodyTextStyle}" />
                    </Grid>

                    <Grid ColumnDefinitions="120, *" ColumnSpacing="12">
                        <Label Grid.Column="0"
                               Text="Developer:"
                               FontSize="13"
                               Style="{StaticResource SecondaryTextStyle}" />
                        
                        <Label Grid.Column="1"
                               Text="Red Nacho Team"
                               FontSize="13"
                               Style="{StaticResource BodyTextStyle}" />
                    </Grid>
                </VerticalStackLayout>
            </VerticalStackLayout>

            

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>

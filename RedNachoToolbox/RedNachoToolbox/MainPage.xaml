<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:views="clr-namespace:RedNachoToolbox.Views"
             xmlns:viewmodels="clr-namespace:RedNachoToolbox.ViewModels"
             x:Class="RedNachoToolbox.MainPage"
             x:DataType="viewmodels:MainViewModel"
             Title="Red Nacho ToolBox">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Navigation Sidebar -->
        <Border Grid.Column="0"
                BackgroundColor="{DynamicResource SidebarBackgroundColor}"
                StrokeThickness="0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                
                <!-- Main Navigation Area -->
                <ScrollView Grid.Row="0">
                    <VerticalStackLayout Padding="16" Spacing="16">
                        <!-- App Branding -->
                        <Label Text="Red Nacho ToolBox"
                               FontSize="18"
                               FontAttributes="Bold"
                               HorizontalOptions="Center"
                               Margin="0,0,0,20" />
                        
                        <!-- Search Bar -->
                        <SearchBar x:Name="ToolSearchBar"
                                   Placeholder="Search tools..."
                                   BackgroundColor="{DynamicResource InputBackgroundColor}"
                                   TextColor="{DynamicResource InputTextColor}"
                                   PlaceholderColor="{DynamicResource InputPlaceholderColor}"
                                   SearchButtonPressed="OnSearchButtonPressed"
                                   TextChanged="OnSearchTextChanged"
                                   Margin="0,0,0,16" />
                        
                        <!-- Navigation Buttons -->
                        <VerticalStackLayout Spacing="8">
                            <!-- All Applications Button -->
                            <Button x:Name="AllApplicationsButton"
                                    Text="All Applications"
                                    BackgroundColor="{DynamicResource ButtonBackgroundColor}"
                                    TextColor="{DynamicResource ButtonTextColor}"
                                    BorderColor="{DynamicResource ButtonBorderColor}"
                                    BorderWidth="1"
                                    CornerRadius="6"
                                    FontSize="14"
                                    HeightRequest="40"
                                    HorizontalOptions="Fill"
                                    Clicked="OnAllApplicationsClicked" />
                            
                            <!-- Documentation Button -->
                            <Button x:Name="DocumentationButton"
                                    Text="Documentation"
                                    BackgroundColor="{DynamicResource ButtonBackgroundColor}"
                                    TextColor="{DynamicResource ButtonTextColor}"
                                    BorderColor="{DynamicResource ButtonBorderColor}"
                                    BorderWidth="1"
                                    CornerRadius="6"
                                    FontSize="14"
                                    HeightRequest="40"
                                    HorizontalOptions="Fill"
                                    Clicked="OnDocumentationClicked" />
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </ScrollView>
                
                <!-- Settings Button (Bottom Anchored) -->
                <Border Grid.Row="1"
                        BackgroundColor="{DynamicResource SettingsBackgroundColor}"
                        StrokeThickness="0"
                        Padding="16,12">
                    <Button x:Name="SettingsButton"
                            Text="⚙️ Settings"
                            BackgroundColor="{DynamicResource SettingsButtonBackgroundColor}"
                            TextColor="{DynamicResource ButtonTextColor}"
                            BorderColor="{DynamicResource SettingsButtonBorderColor}"
                            BorderWidth="1"
                            CornerRadius="6"
                            FontSize="14"
                            HeightRequest="40"
                            HorizontalOptions="Fill"
                            Clicked="OnSettingsClicked" />
                </Border>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <Border Grid.Column="1"
                BackgroundColor="{DynamicResource PageBackgroundColor}"
                StrokeThickness="0">
            <!-- All Tools View -->
            <views:AllToolsView BindingContext="{Binding}" />
        </Border>
    </Grid>

</ContentPage>
